require ethercatmc

epicsEnvSet("MOTOR_PORT",    "$(SM_MOTOR_PORT=MCU1)")
epicsEnvSet("IPADDR",        "$(SM_IPADDR=10.102.10.44)")
epicsEnvSet("IPPORT",        "$(SM_IPPORT=48898)")
epicsEnvSet("AMSNETIDIOC",   "$(SM_AMSNETID=10.102.10.49.1.1)")
epicsEnvSet("ASYN_PORT",     "$(SM_ASYN_PORT=MC_CPU1)")
epicsEnvSet("PREFIX",        "$(SM_PREFIX=YMIR-)")
epicsEnvSet("PREC",          "$(SM_PREC=3)")
#epicsEnvSet("SM_NOAXES",     "9")
epicsEnvSet("ECM_NUMAXES",     "9")
epicsEnvSet("ECM_OPTIONS",   "adsPort=852;amsNetIdRemote=10.102.10.44.1.1;amsNetIdLocal=$(AMSNETIDIOC)")

epicsEnvSet("ECM_MOVINGPOLLPERIOD", "0")
epicsEnvSet("ECM_IDLEPOLLPERIOD",   "0")

iocshLoad("$(ethercatmc_DIR)ethercatmcController.iocsh")

#
# AXIS 3
#
epicsEnvSet("AXISCONFIG",      "")
epicsEnvSet("MOTOR_NAME",      "$(SM_MOTOR_NAME=ColSl1:MC-SlYp-01)")
epicsEnvSet("AXIS_NO",         "$(SM_AXIS_NO=3)")
epicsEnvSet("DESC",            "$(SM_DESC=DESC)")
epicsEnvSet("EGU",             "$(SM_EGU=EGU)")
epicsEnvSet("RAWENCSTEP_ADEL", 0)
epicsEnvSet("RAWENCSTEP_MDEL", 0)
iocshLoad("$(ethercatmc_DIR)ethercatmcIndexerAxis.iocsh")
iocshLoad("$(ethercatmc_DIR)ethercatmcAxisdebug.iocsh")

#
# AXIS 4
#
epicsEnvSet("AXISCONFIG",      "")
epicsEnvSet("MOTOR_NAME",      "$(SM_MOTOR_NAME=ColSl1:MC-SlYm-01)")
epicsEnvSet("AXIS_NO",         "$(SM_AXIS_NO=4)")
epicsEnvSet("DESC",            "$(SM_DESC=DESC)")
epicsEnvSet("EGU",             "$(SM_EGU=EGU)")
epicsEnvSet("RAWENCSTEP_ADEL", 0)
epicsEnvSet("RAWENCSTEP_MDEL", 0)
iocshLoad("$(ethercatmc_DIR)ethercatmcIndexerAxis.iocsh")
iocshLoad("$(ethercatmc_DIR)ethercatmcAxisdebug.iocsh")

#
# AXIS 5
#
epicsEnvSet("AXISCONFIG",      "")
epicsEnvSet("MOTOR_NAME",      "$(SM_MOTOR_NAME=ColSl1:MC-SlZp-01)")
epicsEnvSet("AXIS_NO",         "$(SM_AXIS_NO=5)")
epicsEnvSet("DESC",            "$(SM_DESC=DESC)")
epicsEnvSet("EGU",             "$(SM_EGU=EGU)")
epicsEnvSet("RAWENCSTEP_ADEL", 0)
epicsEnvSet("RAWENCSTEP_MDEL", 0)
iocshLoad("$(ethercatmc_DIR)ethercatmcIndexerAxis.iocsh")
iocshLoad("$(ethercatmc_DIR)ethercatmcAxisdebug.iocsh")

#
# AXIS 6
#
epicsEnvSet("AXISCONFIG",      "")
epicsEnvSet("MOTOR_NAME",      "$(SM_MOTOR_NAME=ColSl1:MC-SlZm-01)")
epicsEnvSet("AXIS_NO",         "$(SM_AXIS_NO=6)")
epicsEnvSet("DESC",            "$(SM_DESC=DESC)")
epicsEnvSet("EGU",             "$(SM_EGU=EGU)")
epicsEnvSet("RAWENCSTEP_ADEL", 0)
epicsEnvSet("RAWENCSTEP_MDEL", 0)
iocshLoad("$(ethercatmc_DIR)ethercatmcIndexerAxis.iocsh")
iocshLoad("$(ethercatmc_DIR)ethercatmcAxisdebug.iocsh")

epicsEnvSet("MOVINGPOLLPERIOD", "9")
epicsEnvSet("IDLEPOLLPERIOD",   "100")
ethercatmcStartPoller("$(MOTOR_PORT)", "$(MOVINGPOLLPERIOD)", "$(IDLEPOLLPERIOD)")




