image: ubuntu:xenial

cache:
  paths:
    - /root/.cache

build:
  stage: build
  script:
    - mkdir -p /root/.cache
    - apt-get update
    - apt-get install -y libreadline6-dev libncurses5-dev perl clang g++ g++-mingw-w64-i686 g++-mingw-w64-x86-64 qemu-system-x86 make git
    - ./.ci/gitlab/prepare.sh
    - ./.ci/gitlab/build.sh

variables:
  GIT_SUBMODULE_STRATEGY: "recursive"
  SETUP_PATH: ".ci-local:.ci"
  CI_COMPILER: gcc-5.4.0
  VV: "1"
  BASE: "7.0"
  SET: latest
